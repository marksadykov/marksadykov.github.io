(this.webpackJsonpmark=this.webpackJsonpmark||[]).push([[0],{11:function(e,t,a){e.exports={lineChart:"LineChart_lineChart__1YIFO",labelY:"LineChart_labelY__3CF0E",labelX:"LineChart_labelX__L30Wm"}},22:function(e,t,a){e.exports=a(28)},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),o=a.n(i),c=(a(27),a(1)),s=a(6),l=a(2),u=a(3),m=a.n(u),p=a(15),f=a(16),h=a(9),d=a(18),v=a(20),b=a(12),g=a(17),_=a.n(g),k=a(5),E=a.n(k);function O(e,t){for(var a,n,r,i=e.length,o=i-t,c=O.swaps;i-- >o;)r=i+1,n=e[a=Math.floor(Math.random()*r)],e[a]=e[i],e[i]=n,c.push(i),c.push(a);for(var s=e.slice(o);t--;)i=c.pop(),a=c.pop(),n=e[i],e[i]=e[a],e[a]=n;return s}function y(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}function j(e){var t=Math.random(),a=0;for(var n in e){var r=Object(l.a)(e[n],2),i=r[0],o=r[1];if(t<=(a+=i))return o}}function S(e,t,a){return Math.min(Math.max(a,e),t-50)}function C(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function N(){}O.swaps=[];var M={house:"\ud83d\uddc4",hospital:"\ud83d\udd0c",temple:"\ud83d\uddb2",station:"\ud83d\udcbe",supermarket:"\ud83d\udd0b"};function x(e){var t,a=e.layout,n=e.node,i=e.width,o=e.height,s=e.type,l=e.venue,u=e.onNodeClick,m=void 0===u?N:u,p=a[n.id],f="translate(\n    ".concat(S(p.x,i,7),",\n    ").concat(S(p.y,o,30),"\n  )"),h=_()((t={},Object(c.a)(t,E.a.node,!0),Object(c.a)(t,E.a[s],!0),Object(c.a)(t,E.a[l],!0),Object(c.a)(t,E.a.susceptible,0===n.state),Object(c.a)(t,E.a.sick,1===n.state),Object(c.a)(t,E.a.recovered,2===n.state),Object(c.a)(t,E.a.dead,3===n.state),Object(c.a)(t,E.a.locked,n.locked),t));return r.a.createElement("g",{key:"".concat(n.id,"-Node"),id:n.id,transform:f},"venue"===n.type?r.a.createElement("text",{className:h,onClick:m(n.id),x:-8,y:7,fontSize:16},M[n.venue]):3===n.state?r.a.createElement("text",{onClick:m(n.id),x:-8,y:7,fontSize:16},"\ud83d\udc80"):r.a.createElement("circle",{className:h,r:5,stroke:0,onClick:m(n.id),fill:"black"}),!1,n.locked&&r.a.createElement("circle",{r:40,fill:"none",stroke:"gray",strokeWidth:2}))}var w=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleTick=n.handleTick.bind(Object(h.a)(n)),n.setCurrent=n.setCurrent.bind(Object(h.a)(n)),n.state={current:null,layout:e.nodes.reduce((function(e,t){return e[t.id]={x:0,y:0},e}),{})},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.runForceSimulation(),this.simulation.on("tick",this.handleTick)}},{key:"componentWillUnmount",value:function(){this.simulation.on("tick",null)}},{key:"componentWillReceiveProps",value:function(e){this.props.tick!==e.tick&&this.updateForceSimulation()}},{key:"updateForceSimulation",value:function(){this.simulation.alpha(.2).restart(),this.simulation.nodes(this.props.nodes),this.simulation.force("link").links(this.props.edges)}},{key:"shouldComponentUpdate",value:function(e,t){return e.tick!==t.tick}},{key:"runForceSimulation",value:function(){var e=this.props,t=e.nodes,a=e.edges;(this.simulation=Object(b.c)(t).force("link",Object(b.b)().id((function(e){return e.id}))).force("collide",Object(b.a)((function(){return 1})).iterations(1).radius(9))).force("link").links(a).distance(25)}},{key:"handleTick",value:function(){var e=this.simulation,t=this.state.layout,a={};e.nodes().map((function(e){a[e.id]=e})),this.setState({layout:Object(s.a)({},t,{},a)})}},{key:"setCurrent",value:function(e){var t=this;return function(){t.setState({current:e})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.nodes,n=(t.edges,t.width),i=t.height,o=t.onNodeClick,c=this.state,s=c.layout,l=c.current;return r.a.createElement("svg",{width:n,ref:function(t){return e.svgRef=t},height:i,style:{shapeRendering:"geometricPrecision"}},a.map((function(e,t){return r.a.createElement(x,Object.assign({key:t,node:e,layout:s,current:l,width:n,height:i,onNodeClick:o},e))})))}}]),a}(n.Component);w.defaultProps={width:900,height:600,nodes:[],edges:[]};var A=a(19),R=a(11),G=a.n(R);function I(e,t,a,n){return e.slice(Math.max(e.length-n,0)).reduce((function(e,n,r){return e.concat("".concat(r*t,", ").concat(-n*a))}),[]).join(" ")}function P(e){var t=e.width,a=e.height,n=e.xOffset,i=void 0===n?10:n,o=e.yOffset,c=void 0===o?17:o,s=e.data,l=void 0===s?[]:s,u=e.maxXEntries,m=void 0===u?100:u,p=a-50,f=Math.max.apply(Math,[p].concat(Object(A.a)(l.reduce((function(e,t){var a=t.points;return e.concat(a)}),[])))),h=p/f;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:G.a.labelY},"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0440\u043a\u0435\u0440\u043e\u0432 \u2192"),r.a.createElement("svg",{className:G.a.lineChart,width:t,height:a},r.a.createElement("g",{transform:"scale(1, ".concat(h,"), translate(0, ").concat((a-30)/h,")")},l.map((function(e,t){var a=e.points,n=e.color;return r.a.createElement("g",{key:"line-".concat(t),transform:"translate(".concat(i+5,", ").concat(1+c,")")},r.a.createElement("polyline",{points:I(a,2.5,1,m),stroke:n,fill:"transparent",strokeWidth:2}))})))),r.a.createElement("span",{className:G.a.labelX},"\u0432\u0440\u0435\u043c\u044f \u2192"))}var W=a(4),F=a.n(W);function L(e){var t=e.simulationState,a=e.onSettingChange,n=e.onRestartButtonClick;return r.a.createElement("div",{className:F.a.container},r.a.createElement("div",{className:F.a.form},r.a.createElement("label",null,"\u041d\u0430\u0432\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("initialSickAgents"),value:t.initialSickAgents,min:0,max:10})," ",r.a.createElement("span",{className:F.a.value},t.initialSickAgents)),r.a.createElement("label",null,"\u0412\u043e\u0440\u043a\u0435\u0440\u043e\u0432 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("agentsPerHouse"),value:t.agentsPerHouse,min:1,max:10})," ",r.a.createElement("span",{className:F.a.value},t.agentsPerHouse)),r.a.createElement("label",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432 ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("houses"),value:t.houses,min:0,max:100})," ",r.a.createElement("span",{className:F.a.value},t.houses)),r.a.createElement("label",null,"Master 1 ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("busStations"),value:t.busStations,min:0,max:10})," ",r.a.createElement("span",{className:F.a.value},t.busStations)),r.a.createElement("label",null,"Master 2 ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("hospitals"),value:t.hospitals,min:0,max:10})," ",r.a.createElement("span",{className:F.a.value},t.hospitals)),r.a.createElement("label",null,"Master 3 ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("supermarkets"),value:t.supermarkets,min:0,max:10})," ",r.a.createElement("span",{className:F.a.value},t.supermarkets)),r.a.createElement("label",null,"Master 4 ",r.a.createElement("br",null),r.a.createElement("input",{type:"range",onChange:a("temples"),value:t.temples,min:0,max:10})," ",r.a.createElement("span",{className:F.a.value},t.temples))),r.a.createElement("div",{className:F.a.footer},r.a.createElement("button",{onClick:n},"\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u0441\u0438\u043c\u0443\u043b\u044f\u0446\u0438\u0438")))}var H,U,Y=a(10),z=(H={},Object(c.a)(H,0,[[1,0]]),Object(c.a)(H,2,[[1,2]]),Object(c.a)(H,1,[[.995,1],[.004,2],[.001,3]]),Object(c.a)(H,3,[[1,3]]),H),B=(U={},Object(c.a)(U,0,[[.3,1],[.7,0]]),Object(c.a)(U,2,[[1,2]]),Object(c.a)(U,1,[[1,1]]),Object(c.a)(U,3,[[1,3]]),U);function T(e,t){var a=e.location.split("-"),n=Object(l.a)(a,1)[0];if("house"===n&&Math.random()<.9)return"stay";var r,i=t[n];return(r=i)[Math.floor(Math.random()*r.length)]}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600;y(e);for(var a=100,n=e.filter((function(e){return"venue"===e.type})),r=n.length,i=0;i<r;i++){var o=n[i],c=Math.floor(i/(t/a))+1,s=Math.floor(i%(t/a))+1,l=c*a,u=s*a;o.fx=l,o.fy=u}return e}var V=[{name:"house",members:function(e){return e.agentsPerHouse},isRoot:!0,count:function(e){return e.houses}},{name:"temple",count:function(e){return e.temples}},{name:"hospital",count:function(e){return e.hospitals}},{name:"supermarket",count:function(e){return e.supermarkets}},{name:"station",count:function(e){return e.busStations}}],Z={house:["supermarket","station","hospital","house","house","house","house","house","house","house","house"],supermarket:["base","base","base","supermarket"],hospital:["hospital","base","base","base"],station:["supermarket","base","base","base","temple"],temple:["supermarket","base","base","base"]};function q(e){var t=[],a=[];V.forEach((function(n){for(var r=n.name,i=n.members,o=(n.isRoot,n.count),c=(n.alignment,0),s=0;c<o(e);c++,s++){var l="".concat(r,"-").concat(c);if(t.push({type:"venue",venue:r,id:l,size:1}),i)for(var u=0;u<i(e);u++,s++){var m="".concat(r,"-").concat(c,"-").concat(u);t.push({type:"agent",location:l,base:l,id:m,size:1,state:0}),a.push({source:m,target:l})}}}));var n,r=O(t.filter((function(e){return"agent"===e.type})),e.initialSickAgents),i=Object(Y.a)(r);try{for(i.s();!(n=i.n()).done;){n.value.state=1}}catch(o){i.e(o)}finally{i.f()}return{nodes:X(t),edges:a}}function J(e,t,a){V.find((function(e){return e.isRoot}));return t.filter((function(e){return"agent"===e.type})).forEach((function(e,n){var r,i=T(e,Z),o=e.location.split("-");Object(l.a)(o,1)[0]===i||"base"===i&&e.location===e.base||"stay"===i||3!==e.state&&Q(t,a,e,"base"===i?t.find((function(t){return t.id===e.base})):(r=e,t.filter((function(e){return e.venue===i})).reduce((function(e,t){return C(r,t)<C(r,e)?t:e}))))})),{nodes:t=function(e,t){var a,n=Object(Y.a)(e);try{var r=function(){var n=a.value;if("agent"!==n.type)return"continue";var r=e.find((function(e){var t=e.id;return n.location===t}));t.filter((function(e){return e.target.id===r.id})).map((function(e){return e.source})).forEach((function(e){e.id!==n.id&&(1===n.state&&(e.state=j(B[e.state])),e.state=j(z[e.state]))}))};for(n.s();!(a=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}(t,a),edges:a,state:Object(s.a)({},e,{tick:e.tick+1})}}function Q(e,t,a,n){var r=e.find((function(e){return e.id===a.location}));if(!n.locked&&!r.locked){t.map((function(e){e.source.id===a.id&&(e.target=n)}));a.location=n.id}}var D={tick:0,agentsPerHouse:9,houses:42,busStations:1,hospitals:1,supermarkets:3,temples:1,initialSickAgents:1},K=q(D);var $=function(){var e=Object(n.useState)(D),t=Object(l.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(K.nodes),u=Object(l.a)(o,2),p=u[0],f=u[1],h=Object(n.useState)(K.edges),d=Object(l.a)(h,2),v=d[0],b=d[1],g=Object(n.useState)([]),_=Object(l.a)(g,2),k=_[0],E=_[1],O=Object(n.useState)([]),y=Object(l.a)(O,2),j=y[0],S=y[1],C=Object(n.useState)([]),N=Object(l.a)(C,2),M=N[0],x=N[1],A=Object(n.useState)(!0),R=Object(l.a)(A,2),G=R[0],I=R[1],W=Object(n.useRef)(null);return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){if(!G){var e=J(a,p,v),t=(e.nodes,e.edges,e.state);i(t),E(k.concat(p.filter((function(e){return 1===e.state})).length)),S(j.concat(p.filter((function(e){return 2===e.state})).length)),x(M.concat(p.filter((function(e){return 3===e.state})).length))}}),1e3),Object(n.useEffect)((function(){I(!1)}),[G]),r.a.createElement("div",{className:m.a.container},r.a.createElement("div",{className:m.a.header},r.a.createElement("h3",null,"\u0418\u043c\u0438\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0441\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432"),r.a.createElement("h2",null,"\u041c\u043e\u0434\u0435\u043b\u044c \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0421\u0430\u0434\u044b\u043a\u043e\u0432, \u0418\u04235-73\u0411")),r.a.createElement("div",{className:m.a.simulation},r.a.createElement("div",{className:m.a.samples},r.a.createElement("span",{className:m.a.sampleSusceptible},"\u041d\u0435\u0437\u0430\u043d\u044f\u0442\u044b\u0435"),r.a.createElement("span",{className:m.a.sampleInfected},"\u0427\u0430\u0441\u0442\u0438\u0447\u043d\u043e"),r.a.createElement("span",{className:m.a.sampleRecovered},"\u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e"),r.a.createElement("i",null,"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441")),!G&&r.a.createElement(w,{width:110*Math.round(p.filter((function(e){return"venue"===e.type})).length/6),height:700,tick:a.tick,nodes:p,edges:v,onNodeClick:function(e){return function(){var t=p.find((function(t){var a=t.id;return e===a}));"venue"===t.type&&(t.locked=!t.locked)}},ref:W})),r.a.createElement("div",{className:m.a.section},r.a.createElement("div",{className:m.a.stats},r.a.createElement("h3",null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),r.a.createElement("div",{className:m.a.population},"\u0412\u043e\u0440\u043a\u0435\u0440\u043e\u0432: ",p.filter((function(e){return"agent"===e.type})).length," ",r.a.createElement("br",null),"\u0423\u0431\u0438\u0442\u044b\u0445: ",p.filter((function(e){return 3===e.state})).length," ",r.a.createElement("br",null),"\u041f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445: ",p.filter((function(e){return 2===e.state})).length," ",r.a.createElement("br",null),"\u0427\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445: ",p.filter((function(e){return 1===e.state})).length," ",r.a.createElement("br",null)),r.a.createElement(P,{width:300,height:270,data:[{color:"red",points:k},{color:"green",points:j},{color:"black",points:M}]})),r.a.createElement("div",{className:m.a.simulationSettings},r.a.createElement("h3",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("div",{className:m.a.simulationInfo},"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043c\u0435\u043d\u044f\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(L,{simulationState:a,onSettingChange:function(e){return function(t){i(Object(s.a)({},a,Object(c.a)({},e,t.target.value)))}},onRestartButtonClick:function(){var e=q(a),t=e.nodes,n=e.edges;I(!0),f(t),b(n),x([]),S([]),E([]),i(Object(s.a)({},a,{tick:0}))}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},3:function(e,t,a){e.exports={container:"App_container__1MQN3",header:"App_header__3ZZ1n",simulationContainer:"App_simulationContainer__23iFm",simulation:"App_simulation__1Y9Gr",section:"App_section__1OL6S",simulationSettings:"App_simulationSettings__txA-R",stats:"App_stats__2fMs7",population:"App_population__3MVPW",simulationInfo:"App_simulationInfo__1KRFk",pageInfo:"App_pageInfo__2E9cf",samples:"App_samples__2e7V-",sampleSusceptible:"App_sampleSusceptible__2olEO",sampleInfected:"App_sampleInfected__1l1Pi",sampleRecovered:"App_sampleRecovered__33NzV"}},4:function(e,t,a){e.exports={container:"SimulationSettings_container__vY4rL",form:"SimulationSettings_form__E6YUW",value:"SimulationSettings_value__1sPd7",footer:"SimulationSettings_footer__1GRqa"}},5:function(e,t,a){e.exports={node:"Graph_node__2LUmU",venue:"Graph_venue__1yeeL",hospital:"Graph_hospital__2-HM5",teatr:"Graph_teatr__3zcOH",station:"Graph_station__3oWAU",supermarket:"Graph_supermarket__x5o1m",susceptible:"Graph_susceptible__2UC5Q",dead:"Graph_dead__aGtk-",sick:"Graph_sick__2ig0f",recovered:"Graph_recovered__3crc2",lockedSymbol:"Graph_lockedSymbol__1OEeZ"}}},[[22,1,2]]]);
//# sourceMappingURL=main.ab36e138.chunk.js.map